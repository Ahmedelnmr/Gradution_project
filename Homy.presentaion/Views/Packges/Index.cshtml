@model IEnumerable<Homy.Application.Dtos.PackageDto>


@{
    ViewData["Title"] = "إدارة الباقات";
    var colors = new[] { "success", "primary", "purple", "warning", "info" };
}

<div class="page-content">
    <div class="page-header">
        <div class="header-content">
            <h1 class="page-title">
                <i class="fas fa-box text-primary"></i>
                إدارة الباقات
            </h1>
            <nav class="breadcrumb-nav">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/">الرئيسية</a></li>
                    <li class="breadcrumb-item active">إدارة الباقات</li>
                </ol>
            </nav>
        </div>
        <div class="header-actions">
            <a asp-action="Create" class="btn btn-primary">
                <i class="fas fa-plus"></i>
                إضافة باقة جديدة
            </a>
        </div>
    </div>

    <!-- Pricing Cards -->
    <div class="row g-4 mb-4">
        @if (Model != null && Model.Any())
        {
            int i = 0;
            foreach (var item in Model)
            {
                var colorClass = colors[i % colors.Length];
                <div class="col-lg-4 col-md-6">
                    <div class="card pricing-card @(item.MaxProperties > 20 ? "featured" : "")">
                        @if (item.MaxProperties > 20)
                        {
                            <div class="pricing-badge">مميز</div>
                        }
                        <div class="pricing-header bg-@colorClass">
                            <h3 class="pricing-title">@item.Name</h3>
                            <div class="pricing-price">
                                <span class="price-amount">@item.Price.ToString("N0")</span>
                                <span class="price-currency">جنيه</span>
                                <span class="price-period">/ @item.DurationDays يوم</span>
                            </div>
                        </div>
                        <div class="pricing-body">
                            <ul class="pricing-features">
                                <li><i class="fas fa-check text-success"></i> @item.MaxProperties إعلانات كحد أقصى</li>
                                <li><i class="fas fa-check text-success"></i> @item.MaxFeatured إعلانات مميزة</li>
                                <li>
                                    @if(item.CanBumpUp)
                                    {
                                         <i class="fas fa-check text-success"></i> <span>إمكانية رفع الإعلان</span>
                                    }
                                    else
                                    {
                                         <i class="fas fa-times text-muted"></i> <span>لا يوجد رفع للإعلان</span>
                                    }
                                </li>
                                <li><i class="fas fa-check text-success"></i> صلاحية @item.DurationDays يوم</li>
                            </ul>
                            <div class="pricing-stats">
                                <span class="stat"><i class="fas fa-users"></i> @item.SubscriptionsCount مشترك</span>
                            </div>
                        </div>
                        <div class="pricing-footer">
                            <a asp-action="Edit" asp-route-id="@item.Id" class="btn btn-outline-@colorClass w-100 mb-2">
                                <i class="fas fa-edit"></i> تعديل الباقة
                            </a>
                            <form asp-action="Delete" asp-route-id="@item.Id" method="post" onsubmit="return confirm('هل أنت متأكد من حذف هذه الباقة؟');">
                                <button type="submit" class="btn btn-danger w-100">
                                    <i class="fas fa-trash"></i> حذف
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
                i++;
            }
        }
        else
        {
            <div class="col-12 text-center">
                <div class="alert alert-info">لا توجد باقات مضافة حالياً.</div>
            </div>
        }
    </div>
</div>

<style>
    /* Add Custom Styles from packages.html if needed or rely on global CSS. 
       Assuming global CSS covers 'pricing-card', 'pricing-header', etc. 
       If not, I might need to copy CSS here or assume styles are in site.css.
       Given user said 'similar design', I'll assume classes exist or I should inline critical CSS.
       Let's inline the specific card styles to be safe as previously requested for design. */
    
    .pricing-card {
        border: none;
        border-radius: 16px;
        overflow: hidden;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        height: 100%;
        background: var(--bg-surface, #fff);
        box-shadow: 0 4px 20px rgba(0,0,0,0.05);
    }
    
    .pricing-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.1);
    }
    
    .pricing-header {
        padding: 2rem;
        text-align: center;
        color: white;
        position: relative;
    }
    
    .pricing-header.bg-success { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
    .pricing-header.bg-primary { background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%); }
    .pricing-header.bg-purple { background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); }
    .pricing-header.bg-warning { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); }
    .pricing-header.bg-info { background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); }

    .pricing-title { font-weight: 700; margin-bottom: 1rem; font-size: 1.5rem; }
    
    .pricing-price { display: flex; align-items: baseline; justify-content: center; gap: 0.25rem; }
    .price-amount { font-size: 2.5rem; font-weight: 800; }
    .price-currency { font-size: 1rem; opacity: 0.9; }
    .price-period { font-size: 0.875rem; opacity: 0.8; }
    
    .pricing-body { padding: 2rem; }
    
    .pricing-features { list-style: none; padding: 0; margin: 0 0 1.5rem 0; }
    .pricing-features li { display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem; color: var(--text-secondary, #64748b); }
    .pricing-features li i { width: 20px; text-align: center; }
    
    .pricing-stats { border-top: 1px solid rgba(0,0,0,0.05); padding-top: 1rem; text-align: center; color: var(--text-muted, #94a3b8); font-size: 0.875rem; }
    
    .pricing-footer { padding: 0 2rem 2rem 2rem; }
    
    .featured { transform: scale(1.02); border: 2px solid #6366f1; z-index: 1; }
    .pricing-badge { position: absolute; top: 1rem; left: 50%; transform: translateX(-50%); background: #f59e0b; color: #fff; padding: 0.25rem 1rem; border-radius: 20px; font-size: 0.75rem; font-weight: 700; box-shadow: 0 2px 10px rgba(245, 158, 11, 0.3); }
</style>
