# ุฏููู ุงุณุชุฎุฏุงู ุณูุฑูุจุช Seeding ููุงุนุฏุฉ ุจูุงูุงุช Homy

## ูุธุฑุฉ ุนุงูุฉ
ูุฐุง ุงูุณูุฑูุจุช `SeedData.sql` ูุญุชูู ุนูู ุจูุงูุงุช ุฃูููุฉ (seeding data) ููุงุนุฏุฉ ุจูุงูุงุช Homyุ ููุดูู ุฌููุน ุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ ูููุธุงู.

## ๐ ุงูุจูุงูุงุช ุงููุชุถููุฉ

### 1. ุงูุฃุฏูุงุฑ (Roles)
- **Admin** - ูุฏูุฑ ุงููุธุงู
- **User** - ูุณุชุฎุฏู ุนุงุฏู
- **Broker** - ุณูุณุงุฑ/ูุณูุท ุนูุงุฑู

### 2. ุงููุณุชุฎุฏููู (Users)
| ุงูุงุณู | ุงูุจุฑูุฏ ุงูุฅููุชุฑููู | ุงูุฏูุฑ | ูููุฉ ุงููุฑูุฑ |
|------|------------------|------|------------|
| ูุฏูุฑ ุงููุธุงู | admin@homy.com | Admin | Pass@123 |
| ุฃุญูุฏ ูุญูุฏ ุนูู | ahmed.mohamed@gmail.com | User | Pass@123 |
| ุณุงุฑุฉ ุญุณู ุฅุจุฑุงููู | sara.hassan@gmail.com | User | Pass@123 |
| ุนูุฑ ุงูุณูุฏ | broker.omar@homy.com | Broker | Pass@123 |
| ูุงุทูุฉ ุฃุญูุฏ | broker.fatma@homy.com | Broker | Pass@123 |

### 3. ุงููุฏู ูุงูุฃุญูุงุก
- **8 ูุฏู**: ุงููุงูุฑุฉุ ุงูุฌูุฒุฉุ ุงูุฅุณููุฏุฑูุฉุ ุงูุดุฑููุฉุ ุงููููููุฉุ ุงูููููุจูุฉุ ุงูุจุญูุฑุฉุ ุงูุฏููููุฉ
- **17 ุญู**: ูุฏููุฉ ูุตุฑุ ุงููุนุงุฏูุ ุงูุฒูุงููุ ุงูุชุฌูุน ุงูุฎุงูุณุ ุงูุดูุฎ ุฒุงูุฏุ ุงููููุฏุณููุ ูุบูุฑูุง

### 4. ุฃููุงุน ุงูุนูุงุฑุงุช
ุดูุฉุ ูููุงุ ูุญู ุชุฌุงุฑูุ ููุชุจุ ูุทุนุฉ ุฃุฑุถุ ุนูุงุฑุฉุ ุฏูุจููุณุ ุจูุชูุงูุณุ ุดุงููู

### 5. ุงูููุฒุงุช ูุงููุฑุงูู (12 ููุฒุฉ)
ูุณุจุญุ ุญุฏููุฉุ ูุตุนุฏุ ูููู ุณูุงุฑุงุชุ ุฃูู ูุญุฑุงุณุฉุ ุตุงูุฉ ุฑูุงุถูุฉุ ุชูููู ูุฑูุฒูุ ุบุงุฒ ุทุจูุนูุ ุฅูุชุฑูุชุ ุจููููุฉุ ููุฑูุดุ ูุทุจุฎ ูุฌูุฒ

### 6. ุงูุจุงูุงุช (5 ุจุงูุงุช)
- ุจุงูุฉ ูุฌุงููุฉ (0 ุฌููู)
- ุจุงูุฉ ุจุฑููุฒูุฉ (199 ุฌููู)
- ุจุงูุฉ ูุถูุฉ (399 ุฌููู)
- ุจุงูุฉ ุฐูุจูุฉ (699 ุฌููู)
- ุจุงูุฉ ุจูุงุชููููู (1299 ุฌููู)

### 7. ุงููุดุงุฑูุน/ุงูููุจููุฏุงุช
- ููุจููุฏ ุงูุฑุญุงุจ
- ููุจููุฏ ุจููุฑูู ูููุฒ
- ููุจููุฏ ูููุช ุฌูุงูุฉ

### 8. ุนููุงุช ูู ุงูุนูุงุฑุงุช (5 ุนูุงุฑุงุช)
- ุดูุฉ ููุจูุน ูู ูุฏููุฉ ูุตุฑ
- ูููุง ููุจูุน ูู ุงูุดูุฎ ุฒุงูุฏ
- ุดูุฉ ููุฑูุดุฉ ููุฅูุฌุงุฑ ูู ุงููุนุงุฏู
- ูุญู ุชุฌุงุฑู ููุฅูุฌุงุฑ
- ุฃุฑุถ ุฒุฑุงุนูุฉ ููุจูุน

## ๐ ููููุฉ ุงูุชุดุบูู

### ุงูุทุฑููุฉ 1: ุจุงุณุชุฎุฏุงู SQL Server Management Studio (SSMS)

1. ุงูุชุญ **SQL Server Management Studio**
2. ุงุชุตู ุจุงูุณูุฑูุฑ ุงูุฎุงุต ุจู
3. ุงูุชุญ ููู `SeedData.sql`
4. **ููู ุฌุฏุงู**: ูู ุจุชุนุฏูู ุงุณู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ุงูุณุทุฑ ุงูุฃูู:
   ```sql
   USE [HomyDB]; -- ุบูุฑ ูุฐุง ุฅูู ุงุณู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู
   ```
5. ุงุถุบุท ุนูู **Execute** ุฃู `F5` ูุชุดุบูู ุงูุณูุฑูุจุช

### ุงูุทุฑููุฉ 2: ุจุงุณุชุฎุฏุงู sqlcmd ูู Command Line

```powershell
sqlcmd -S localhost -d HomyDB -i "SeedData.sql"
```

ุฃู ุฅุฐุง ููุช ุจุญุงุฌุฉ ูุชุณุฌูู ุงูุฏุฎูู:
```powershell
sqlcmd -S localhost -U sa -P YourPassword -d HomyDB -i "SeedData.sql"
```

### ุงูุทุฑููุฉ 3: ุจุงุณุชุฎุฏุงู Visual Studio

1. ุงูุชุญ **SQL Server Object Explorer**
2. ุงุถุบุท ุจุฒุฑ ุงููุงูุณ ุงูุฃููู ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. ุงุฎุชุฑ **New Query**
4. ุงูุตู ูุญุชูู ููู `SeedData.sql`
5. ุงุถุบุท ุนูู **Execute**

## โ๏ธ ุชุญุฐูุฑุงุช ูููุฉ

### 1. ุชูุธูู ุงูุจูุงูุงุช ุงููุฏููุฉ
ุงูุณูุฑูุจุช ูุญุชูู ุนูู ูุณู ูุนูู (commented) ูุญุฐู ุงูุจูุงูุงุช ุงููุฏููุฉ. ุฅุฐุง ููุช ุชุฑูุฏ ุงูุจุฏุก ูู ุงูุตูุฑ:

```sql
-- ุงุญุฐู ุงูุชุนููู ูู ูุฐุง ุงููุณู ูู ุงูุณูุฑูุจุช
DELETE FROM PropertyAmenities;
DELETE FROM PropertyImages;
-- ... ุฅูุฎ
```

### 2. ูููุงุช ุงููุฑูุฑ
- ูููุฉ ุงููุฑูุฑ ุงูุงูุชุฑุงุถูุฉ ูุฌููุน ุงููุณุชุฎุฏููู ูู: `Pass@123`
- ุงููุงุด ุงููุณุชุฎุฏู ูู: `AQAAAAIAAYagAAAAEKk8qXGHBrL8DvBfxEh5WxJ3yMF5rNLVJQXZmKpwQZ9VHnFqTQJYPx2vR3FqZw==`
- **ููุงุญุธุฉ**: ูุฐุง ูุงุด ุชุฌุฑูุจูุ ูุฌุจ ุชุบููุฑู ูู ุงูุจูุฆุฉ ุงูุฅูุชุงุฌูุฉ

### 3. ุงูุตูุฑ ูุงููููุงุช
ุงูุณูุฑูุจุช ูุณุชุฎุฏู ูุณุงุฑุงุช ููููุฉ ููุตูุฑ ูุซู:
- `/images/properties/apt1-main.jpg`
- `/images/icons/apartment.svg`

ุชุฃูุฏ ูู ูุฌูุฏ ุงูุตูุฑ ุงููุนููุฉ ูู ูุฐู ุงููุณุงุฑุงุช ุฃู ูู ุจุชุบููุฑูุง.

## ๐ ุฅุญุตุงุฆูุงุช ุงูุจูุงูุงุช ุงููุถุงูุฉ

| ุงูููุน | ุงูุนุฏุฏ |
|------|------|
| ุงูุฃุฏูุงุฑ | 3 |
| ุงููุณุชุฎุฏููู | 5 |
| ุงููุฏู | 8 |
| ุงูุฃุญูุงุก | 17 |
| ุฃููุงุน ุงูุนูุงุฑุงุช | 9 |
| ุงูููุฒุงุช | 12 |
| ุงูุจุงูุงุช | 5 |
| ุงููุดุงุฑูุน | 3 |
| ุงูุนูุงุฑุงุช | 5 |
| ุตูุฑ ุงูุนูุงุฑุงุช | 9 |
| ูููุฒุงุช ุงูุนูุงุฑุงุช | 12 |
| ุงูุงุดุชุฑุงูุงุช | 3 |
| ุงูุนูุงุฑุงุช ุงููุญููุธุฉ | 3 |
| ุงูุฅุดุนุงุฑุงุช | 3 |
| ุงููุฑุงุฌุนุงุช | 2 |

## ๐ ุงูุชุญูู ูู ูุฌุงุญ ุงูุนูููุฉ

ุจุนุฏ ุชุดุบูู ุงูุณูุฑูุจุชุ ููููู ุงูุชุญูู ูู ุงูุจูุงูุงุช:

```sql
-- ุนุฏุฏ ุงููุณุชุฎุฏููู
SELECT COUNT(*) FROM AspNetUsers;

-- ุนุฏุฏ ุงูุนูุงุฑุงุช
SELECT COUNT(*) FROM Properties;

-- ุนุฑุถ ุฌููุน ุงูุนูุงุฑุงุช ูุน ุงูุชูุงุตูู
SELECT 
    p.Title,
    c.Name AS City,
    d.Name AS District,
    pt.Name AS PropertyType,
    p.Price,
    u.FullName AS Owner
FROM Properties p
JOIN Cities c ON p.CityId = c.Id
LEFT JOIN Districts d ON p.DistrictId = d.Id
JOIN PropertyTypes pt ON p.PropertyTypeId = pt.Id
JOIN AspNetUsers u ON p.UserId = u.Id
WHERE p.IsDeleted = 0;

-- ุนุฑุถ ุงููุณุชุฎุฏููู ูุฃุฏูุงุฑูู
SELECT 
    u.FullName,
    u.Email,
    r.Name AS Role
FROM AspNetUsers u
JOIN AspNetUserRoles ur ON u.Id = ur.UserId
JOIN AspNetRoles r ON ur.RoleId = r.Id;
```

## ๐๏ธ ุชุฎุตูุต ุงูุจูุงูุงุช

ููููู ุจุณูููุฉ ุชุฎุตูุต ุงูุจูุงูุงุช ุนู ุทุฑูู:

1. **ุฅุถุงูุฉ ูุฏู ุฌุฏูุฏุฉ**: ุงุจุญุซ ุนู ูุณู "ุฅุฏุฑุงุฌ ุงููุฏู"
2. **ุฅุถุงูุฉ ุนูุงุฑุงุช**: ุงุจุญุซ ุนู ูุณู "ุฅุฏุฑุงุฌ ุงูุนูุงุฑุงุช"
3. **ุชุบููุฑ ุงูุฃุณุนุงุฑ**: ูู ุจุชุนุฏูู ูููุฉ `Price` ูู ุฌุฏูู `Properties`
4. **ุฅุถุงูุฉ ุจุงูุงุช ุฌุฏูุฏุฉ**: ูู ุจุชุนุฏูู ูุณู "ุฅุฏุฑุงุฌ ุงูุจุงูุงุช"

## ๐ ููุงุญุธุงุช ุฅุถุงููุฉ

### ุชูุณูู ุงูุชูุงุฑูุฎ
ุงูุณูุฑูุจุช ูุณุชุฎุฏู `GETDATE()` ููุชูุงุฑูุฎ ุงูุญุงููุฉ. ููููู ุชุบููุฑูุง ุฅูู ุชูุงุฑูุฎ ูุญุฏุฏุฉ:
```sql
-- ุจุฏูุงู ูู GETDATE()
'2024-01-01'
```

### ุงูุนูุงูุงุช ุจูู ุงูุฌุฏุงูู
ุงูุณูุฑูุจุช ูุญุงูุธ ุนูู ุฌููุน ุงูุนูุงูุงุช (Foreign Keys):
- ูู ุนูุงุฑ ูู ุตุงุญุจ (UserId)
- ูู ุนูุงุฑ ูู ูุฏููุฉ ูุญู
- ูู ุนูุงุฑ ูู ููุน
- ุงูุนูุงุฑุงุช ููุง ุตูุฑ ููููุฒุงุช

### ุงูุฃุฏุงุก
ุฅุฐุง ููุช ุชุฑูุฏ ุฅุถุงูุฉ ูููุฉ ูุจูุฑุฉ ูู ุงูุจูุงูุงุช:
1. ูู ุจุชุนุทูู ุงูู indexes ูุคูุชุงู
2. ุดุบู ุงูุณูุฑูุจุช
3. ุฃุนุฏ ุชูุนูู ุงูู indexes

```sql
-- ุชุนุทูู ุงูู indexes
ALTER INDEX ALL ON Properties DISABLE;

-- ุจุนุฏ ุฅุฏุฑุงุฌ ุงูุจูุงูุงุช
ALTER INDEX ALL ON Properties REBUILD;
```

## ๐ ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ

### ุฎุทุฃ: "Invalid object name"
- ุชุฃูุฏ ูู ุฃู ุงุณู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุตุญูุญ ูู `USE [DatabaseName]`
- ุชุฃูุฏ ูู ุชุดุบูู migrations ุฃููุงู

### ุฎุทุฃ: "Violation of UNIQUE KEY constraint"
- ูุฏ ุชููู ุงูุจูุงูุงุช ููุฌูุฏุฉ ูุณุจูุงู
- ุงุณุชุฎุฏู ูุณู ุชูุธูู ุงูุจูุงูุงุช ุฃู ุงุญุฐู ุงูุฌุฏุงูู ูุฏููุงู

### ุฎุทุฃ: "The INSERT statement conflicted with the FOREIGN KEY constraint"
- ุชุฃูุฏ ูู ุชุดุบูู ุงูุณูุฑูุจุช ุจุงููุงูู ุฏูุนุฉ ูุงุญุฏุฉ
- ูุง ุชุดุบู ุฃูุณุงู ูููุตูุฉ

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉ:
1. ุชุญูู ูู ูุฌูุฏ ุฌููุน ุงูุฌุฏุงูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. ุชุฃูุฏ ูู ุชุดุบูู migrations
3. ุฑุงุฌุน ุฑุณุงุฆู ุงูุฎุทุฃ ุจุนูุงูุฉ

---

**ุขุฎุฑ ุชุญุฏูุซ**: ุฏูุณูุจุฑ 2024
**ุงูุฅุตุฏุงุฑ**: 1.0
